<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="infinite-canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ace.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="sandbox.css">
    <title>InfiniteCanvas sandbox</title>
</head>
<body>
    <div class="title"><h3>InfiniteCanvas Sandbox</h3></div>
    <div class="block">
        <canvas width="600" height="600" id="canvas"></canvas>
    </div>
    <div class="block">
        <div id="code"></div>
        <button id="run" value="Run">Run&nbsp;&gt;</button>
    </div>
    <script type="application/javascript">
        (function(){
            var editor = ace.edit(document.getElementById("code"));
            editor.session.setMode("ace/mode/javascript");
            editor.setValue(
                "var canvasElement = document.getElementById(\"canvas\");\r\n"
                +"var infiniteCanvas = new InfiniteCanvas(canvasElement);\r\n"
                +"var context = infiniteCanvas.getContext();\r\n"
                +"infiniteCanvas.greedyGestureHandling = true;\r\n"
                +"\r\n"
                +"context.fillStyle =\"#f00\";\r\n"
                +"context.fillRect(30, 30, 100, 100);");
            editor.clearSelection();
            function run(){
                var canvas = document.getElementById("canvas");
                var canvasParent = canvas.parentElement;
                var width = canvas.width;
                var height = canvas.height;
                canvasParent.removeChild(canvas);
                var newCanvas = document.createElement("canvas");
                newCanvas.setAttribute("width", width);
                newCanvas.setAttribute("height", height);
                newCanvas.setAttribute("id", "canvas");
                canvasParent.appendChild(newCanvas);
                var code = editor.getValue();

                eval(code);
            }
            document.getElementById("run").addEventListener("click", run);
            run();
        })();
    </script>
</body>
</html>