var InfiniteCanvas=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){var{InfiniteCanvas:r}=e(1);t.exports=r},function(t,n,e){"use strict";e.r(n);var r,o=function(){function t(t){this.viewBox=t}return t.prototype.restore=function(){this.viewBox.restoreState()},t.prototype.save=function(){this.viewBox.saveState()},t}(),i=function(){function t(t,n,e,r,o,i){this.a=t,this.b=n,this.c=e,this.d=r,this.e=o,this.f=i,this.scale=Math.sqrt(t*r-n*e)}return t.prototype.getRotationAngle=function(){var t=this.a/this.scale,n=this.b/this.scale;if(0===t)return n>0?Math.PI/2:3*Math.PI/2;var e=Math.atan(n/t);return t>0?n>0?e:0===n?0:2*Math.PI+e:n>0?Math.PI+e:0===n?Math.PI:Math.PI+e},t.prototype.apply=function(t){return{x:this.a*t.x+this.c*t.y+this.e,y:this.b*t.x+this.d*t.y+this.f}},t.prototype.before=function(n){return new t(n.a*this.a+n.c*this.b,n.b*this.a+n.d*this.b,n.a*this.c+n.c*this.d,n.b*this.c+n.d*this.d,n.a*this.e+n.c*this.f+n.e,n.b*this.e+n.d*this.f+n.f)},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f},t.prototype.inverse=function(){var n=this.a*this.d-this.b*this.c;if(0==n)throw"error calculating inverse: zero determinant";return new t(this.d/n,-this.b/n,-this.c/n,this.a/n,(this.c*this.f-this.d*this.e)/n,(this.b*this.e-this.a*this.f)/n)},t.translation=function(n,e){return new t(1,0,0,1,n,e)},t.scale=function(n){return new t(n,0,0,n,0,0)},t.zoom=function(n,e,r,o,i){var a=1-r;return void 0!==o?new t(r,0,0,r,n*a+o,e*a+i):new t(r,0,0,r,n*a,e*a)},t.translateZoom=function(n,e,r,o,i,a,s,c){var u=r-n,h=o-e,p=u*u+h*h;if(0===p)throw new Error("divide by 0");var f=s-i,l=c-a,y=f*f+l*l,d=Math.sqrt(y/p);return t.zoom(n,e,d,i-n,a-e)},t.rotation=function(n,e,r){var o=Math.cos(r),i=Math.sin(r),a=1-o;return new t(o,i,-i,o,n*a+e*i,-n*i+e*a)},t.translateRotateZoom=function(n,e,r,o,i,a,s,c){var u=r-n,h=o-e,p=u*u+h*h;if(0===p)throw new Error("divide by 0");var f=s-i,l=c-a,y=n*o-e*r,d=r*u+o*h,v=n*u+e*h,g=(u*f+h*l)/p,w=(u*l-h*f)/p;return new t(g,w,-w,g,(i*d-s*v-y*l)/p,(a*d-c*v+y*f)/p)},t.identity=new t(1,0,0,1,0,0),t}(),a=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,n){return this.valuesAreEqual(t[this.propertyName],n)?t:t.changeProperty(this.propertyName,n)},t.prototype.isEqualForInstances=function(t,n){return this.valuesAreEqual(t[this.propertyName],n[this.propertyName])},t.prototype.getInstructionToChange=function(t,n){return this.valuesAreEqual(t[this.propertyName],n[this.propertyName])?function(){}:this.changeToNewValue(n[this.propertyName])},t.prototype.valueIsTransformableForInstance=function(t){return!0},t}(),s=(r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),c=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return s(n,t),n.prototype.valuesAreEqual=function(t,n){return t.equals(n)},n.prototype.changeToNewValue=function(t){return function(n,e){var r=e.inverse().before(t).before(e),o=r.a,i=r.b,a=r.c,s=r.d,c=r.e,u=r.f;n.setTransform(o,i,a,s,c,u)}},n}(a))("transformation"),u=function(){function t(t){this.viewBox=t}return t.prototype.getTransform=function(){if(DOMMatrix){var t=this.viewBox.state.current.transformation;return new DOMMatrix([t.a,t.b,t.c,t.d,t.e,t.f])}},t.prototype.resetTransform=function(){this.viewBox.changeState((function(t){return c.changeInstanceValue(t,i.identity)}))},t.prototype.rotate=function(t){this.addTransformation(i.rotation(0,0,t))},t.prototype.scale=function(t,n){this.addTransformation(new i(t,0,0,n,0,0))},t.prototype.setTransform=function(t,n,e,r,o,a){var s,u,h,p,f,l;"number"==typeof t?(s=t,u=n,h=e,p=r,f=o,l=a):void 0!==t.a?(s=t.a,u=t.b,h=t.c,p=t.d,f=t.e,l=t.f):(s=t.m11,u=t.m12,h=t.m21,p=t.m22,f=t.m41,l=t.m42),this.viewBox.changeState((function(t){return c.changeInstanceValue(t,new i(s,u,h,p,f,l))}))},t.prototype.transform=function(t,n,e,r,o,a){this.addTransformation(new i(t,n,e,r,o,a))},t.prototype.translate=function(t,n){this.addTransformation(i.translation(t,n))},t.prototype.addTransformation=function(t){var n=this.viewBox.state.current.transformation,e=t.before(n);this.viewBox.changeState((function(t){return c.changeInstanceValue(t,e)}))},t}(),h=function(){},p=function(){},f=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),l=function(t){function n(n){var e=t.call(this)||this;return e.fillStrokeStyle=n,e}return f(n,t),n.prototype.setTransform=function(t){this.fillStrokeStyle.setTransform(t)},n.prototype.getInstructionToSetUntransformed=function(t){var n=this;return function(e){e[t]=n.fillStrokeStyle}},n.prototype.getInstructionToSetTransformed=function(t){var n=this;return function(e){e[t]=n.fillStrokeStyle}},n}(p),y=function(){function t(t){this.propName=t}return t.prototype.changeInstanceValue=function(t,n){return t.changeProperty(this.propName,n)},t.prototype.isEqualForInstances=function(t,n){return t[this.propName]===n[this.propName]},t.prototype.getInstructionToChange=function(t,n){var e=this,r=n[this.propName];return this.isEqualForInstances(t,n)?r instanceof p&&t.fillAndStrokeStylesTransformed!==n.fillAndStrokeStylesTransformed?n.fillAndStrokeStylesTransformed?r.getInstructionToSetTransformed(this.propName):r.getInstructionToSetUntransformed(this.propName):function(){}:r instanceof p?n.fillAndStrokeStylesTransformed?r.getInstructionToSetTransformed(this.propName):r.getInstructionToSetUntransformed(this.propName):function(t){t[e.propName]=n[e.propName]}},t.prototype.valueIsTransformableForInstance=function(t){return!(t[this.propName]instanceof l)},t}(),d=new y("fillStyle"),v=new y("strokeStyle"),g=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.viewBox.changeState((function(n){return d.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.viewBox.changeState((function(n){return v.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),t.prototype.createLinearGradient=function(t,n,e,r){return this.viewBox.createLinearGradient(t,n,e,r)},t.prototype.createPattern=function(t,n){return this.viewBox.createPattern(t,n)},t.prototype.createRadialGradient=function(t,n,e,r,o,i){return this.viewBox.createRadialGradient(t,n,e,r,o,i)},t}(),w=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),m=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return w(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n){n.shadowColor=t}},n}(a))("shadowColor"),b=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.changeToNewValue=function(t){return function(n,e){var r=e.apply({x:0,y:0}),o=r.x,a=r.y,s=e.before(i.translation(-o,-a)).apply(t),c=s.x,u=s.y;n.shadowOffsetX=c,n.shadowOffsetY=u}},n.prototype.valuesAreEqual=function(t,n){return t.x===n.x&&t.y==n.y},n.prototype.valuesAreEqualWhenTransformed=function(t,n){return 0===t.x&&0===t.y&&0===n.x&&0===n.y},n}(a))("shadowOffset"),x=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),S=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return x(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n,e){n.shadowBlur=t*e.scale}},n}(a))("shadowBlur"),I=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"shadowBlur",{get:function(){return this.viewBox.state.current.shadowBlur},set:function(t){this.viewBox.changeState((function(n){return S.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{get:function(){return this.viewBox.state.current.shadowOffset.x},set:function(t){var n={x:t,y:this.viewBox.state.current.shadowOffset.y};this.viewBox.changeState((function(t){return P.changeInstanceValue(t,n)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{get:function(){return this.viewBox.state.current.shadowOffset.y},set:function(t){var n={x:this.viewBox.state.current.shadowOffset.x,y:t};this.viewBox.changeState((function(t){return P.changeInstanceValue(t,n)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this.viewBox.state.current.shadowColor},set:function(t){this.viewBox.changeState((function(n){return m.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),t}(),T=function(){};function _(t){return void 0!==t.x}var O=function(){function t(t,n,e,r){this.vertices=[{x:t,y:n},{x:t+e,y:n},{x:t,y:n+r},{x:t+e,y:n+r}],this.left=t,this.right=t+e,this.top=n,this.bottom=n+r}return t.prototype.expandToInclude=function(n){var e,r,o,i;_(n)?(e=n.x,r=n.x,o=n.y,i=n.y):(e=n.left,r=n.right,o=n.top,i=n.bottom);var a=Math.min(e,this.left),s=Math.max(r,this.right),c=Math.min(o,this.top);return new t(a,c,s-a,Math.max(i,this.bottom)-c)},t.prototype.getInstructionToClear=function(){var t=this.left,n=this.top,e=this.right-this.left,r=this.bottom-this.top;return j.clearRect(t,n,e,r)},t.prototype.intersectWith=function(n){if(this.contains(n))return n;if(n.contains(this))return this;if(this.intersects(n)){var e=Math.max(this.top,n.top),r=Math.min(this.bottom,n.bottom),o=Math.max(this.left,n.left);return new t(o,e,Math.min(this.right,n.right)-o,r-e)}},t.prototype.transform=function(n){var e=this.vertices.map((function(t){return n.apply(t)})),r=e.map((function(t){return t.x})),o=e.map((function(t){return t.y})),i=Math.min.apply(Math,r),a=Math.min.apply(Math,o);return new t(i,a,Math.max.apply(Math,r)-i,Math.max.apply(Math,o)-a)},t.prototype.intersects=function(t){return this.left<=t.right&&this.right>=t.left&&this.bottom>=t.top&&this.top<=t.bottom},t.prototype.contains=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.create=function(n){return _(n)?new t(n.x,n.y,0,0):n},t}(),A=function(){function t(t){this.execute=t}return t.to=function(n){return new t((function(t,e){return n&&(n=_(n)?t.apply(n):n.transform(t)),e?n?e.expandToInclude(n):e:n?O.create(n):void 0}))},t}();function C(t){return function(n,e){var r=e.a,o=e.b,i=e.c,a=e.d,s=e.e,c=e.f;n.save(),n.transform(r,o,i,a,s,c),t(n,e),n.restore()}}function B(t,n){return t?function(e,r){t(e,r),n(e,r)}:n}var D,j=function(){function t(){}return t.clearRect=function(t,n,e,r){return{instruction:C((function(o,i){o.clearRect(t,n,e,r)})),changeArea:A.to(new O(t,n,e,r))}},t.arc=function(t,n,e,r,o,i){return{instruction:function(a,s){var c=s.getRotationAngle(),u=s.apply({x:t,y:n}),h=u.x,p=u.y;a.arc(h,p,e*s.scale,r+c,o+c,i)},changeArea:A.to(new O(t-e,n-e,2*e,2*e))}},t.arcTo=function(t,n,e,r,o){var i={x:t,y:n},a={x:e,y:r},s=O.create(i).expandToInclude(a);return{instruction:function(t,n){var e=n.apply(i),r=n.apply(a);t.arcTo(e.x,e.y,r.x,r.y,o*n.scale)},changeArea:A.to(s)}},t.bezierCurveTo=function(t,n,e,r,o,i){},t.closePath=function(){return{instruction:function(t,n){t.closePath()},changeArea:A.to()}},t.ellipse=function(t,n,e,r,o,a,s,c){var u=new O(t-e,n-r,2*e,2*r).transform(i.rotation(t,n,o));return{instruction:function(i,u){var h=u.apply({x:t,y:n}),p=u.getRotationAngle();i.ellipse(h.x,h.y,e*u.scale,r*u.scale,o+p,a,s,c)},changeArea:A.to(u)}},t.lineTo=function(t,n){var e={x:t,y:n};return{instruction:function(t,n){var r=n.apply(e),o=r.x,i=r.y;t.lineTo(o,i)},changeArea:A.to(e)}},t.moveTo=function(t,n){var e={x:t,y:n};return{instruction:function(t,n){var r=n.apply(e),o=r.x,i=r.y;t.moveTo(o,i)},changeArea:A.to(e)}},t.quadraticCurveTo=function(t,n,e,r){},t.rect=function(t,n,e,r){var o=new O(t,n,e,r);return{instruction:function(o,i){!function(t,n,e,r,o,i){var a,s,c,u,h,p,f;p=(a=i.apply({x:t,y:n})).x,f=a.y,o.moveTo(p,f),p=(s=i.apply({x:t+e,y:n})).x,f=s.y,o.lineTo(p,f),p=(c=i.apply({x:t+e,y:n+r})).x,f=c.y,o.lineTo(p,f),p=(u=i.apply({x:t,y:n+r})).x,f=u.y,o.lineTo(p,f),p=(h=i.apply({x:t,y:n})).x,f=h.y,o.lineTo(p,f)}(t,n,e,r,o,i)},changeArea:A.to(o)}},t}(),W=function(){function t(t){this.viewBox=t}return t.prototype.clearRect=function(t,n,e,r){this.viewBox.clearArea(t,n,e,r)},t.prototype.fillRect=function(t,n,e,r){this.viewBox.drawPath((function(t){return t.fill()}),[j.rect(t,n,e,r)])},t.prototype.strokeRect=function(t,n,e,r){this.viewBox.drawPath((function(t){return t.stroke()}),[j.rect(t,n,e,r)])},t}(),k=function(){function t(t){this.viewBox=t}return t.prototype.isFillRule=function(t){return"evenodd"===t||"nonzero"===t},t.prototype.beginPath=function(){this.viewBox.beginPath()},t.prototype.clip=function(t,n){var e=this.isFillRule(t)?function(n){n.clip(t)}:function(t){t.clip()};this.viewBox.clipPath(e)},t.prototype.fill=function(t,n){var e=this.isFillRule(t)?function(n){n.fill(t)}:function(t){t.fill()};this.viewBox.drawPath(e)},t.prototype.isPointInPath=function(t,n,e,r){return!0},t.prototype.isPointInStroke=function(t,n,e){return!0},t.prototype.stroke=function(t){this.viewBox.drawPath((function(t){t.stroke()}))},t}(),L=function(){function t(){}return t.prototype.drawFocusIfNeeded=function(t,n){},t.prototype.scrollPathIntoView=function(t){},t}();!function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(D||(D={}));var R=function(){function t(t){this.viewBox=t}return t.prototype.fillText=function(t,n,e,r){var o=void 0===r?function(r){r.fillText(t,n,e)}:function(o){o.fillText(t,n,e,r)};this.viewBox.addDrawing(o,this.getDrawnRectangle(n,e,t),D.Relative,!0)},t.prototype.measureText=function(t){return this.viewBox.measureText(t)},t.prototype.strokeText=function(t,n,e,r){var o=void 0===r?function(r){r.strokeText(t,n,e)}:function(o){o.strokeText(t,n,e,r)};this.viewBox.addDrawing(o,this.getDrawnRectangle(n,e,t),D.Relative,!0)},t.prototype.getDrawnRectangle=function(t,n,e){var r=this.viewBox.measureText(e),o=Math.abs(r.actualBoundingBoxRight-r.actualBoundingBoxLeft),i=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;return new O(t,n-r.actualBoundingBoxAscent,o,i)},t}(),M=function(){function t(t){this.viewBox=t}return t.prototype.drawImage=function(){var t,n,e,r,o,i,a,s,c,u=Array.prototype.slice.apply(arguments);arguments.length<=5?(t=u[0],i=u[1],a=u[2],s=u[3],c=u[4]):(t=u[0],n=u[1],e=u[2],r=u[3],o=u[4],i=u[5],a=u[6],s=u[7],c=u[8]);var h=this.getDrawnLength(t.width,n,r,s),p=this.getDrawnLength(t.height,e,o,c),f=new O(i,a,h,p),l=this.getDrawImageInstruction(arguments.length,t,n,e,r,o,i,a,s,c);this.viewBox.addDrawing(l,f,D.Relative,!0)},t.prototype.getDrawImageInstruction=function(t,n,e,r,o,i,a,s,c,u){switch(t){case 3:return function(t){t.drawImage(n,a,s)};case 5:return function(t){t.drawImage(n,a,s,c,u)};case 9:return function(t){t.drawImage(n,e,r,o,i,a,s,c,u)};default:throw new TypeError("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': Valid arities are: [3, 5, 9], but "+t+" arguments provided.")}},t.prototype.getDrawnLength=function(t,n,e,r){var o=this.getLength(t);return void 0!==r?r:void 0!==n?void 0!==e?e:o-n:o},t.prototype.getLength=function(t){return"number"==typeof t?t:t.baseVal.value},t}();var E=function(){function t(t){this.viewBox=t}return t.prototype.createImageData=function(t,n){},t.prototype.getImageData=function(t,n,e,r){},t.prototype.putImageData=function(t,n,e,r,o,i,a){var s;t=function(t,n,e,r,o){n=void 0===n?0:n,e=void 0===e?0:e,r=void 0===r?t.width:r,o=void 0===o?t.height:o;for(var i=t.data,a=new Uint8ClampedArray(4*r*o),s=0;s<o;s++)for(var c=0;c<r;c++){var u=4*((e+s)*t.width+n+c),h=4*(s*r+c);a[h]=i[u],a[h+1]=i[u+1],a[h+2]=i[u+2],a[h+3]=i[u+3]}return new ImageData(a,r,o)}(t,r,o,i,a);var c=this.viewBox.getDrawingLock();this.viewBox.createPatternFromImageData(t).then((function(t){s=t,c.release()})),this.viewBox.addDrawing((function(r){r.translate(n,e),r.fillStyle=s,r.imageSmoothingEnabled=!1,r.fillRect(0,0,t.width,t.height)}),new O(n,e,t.width,t.height),D.Absolute,!1)},t}(),N=function(){function t(t){this.propertyName=t}return t.prototype.changeInstanceValue=function(t,n){return this.valuesAreEqual(t[this.propertyName],n)?t:t.changeProperty(this.propertyName,n)},t.prototype.isEqualForInstances=function(t,n){return this.valuesAreEqual(t[this.propertyName],n[this.propertyName])},t.prototype.valueIsTransformableForInstance=function(t){return!0},t.prototype.changeToNewValue=function(t,n){return n?this.changeToNewValueTransformed(t):this.changeToNewValueUntransformed(t)},t.prototype.getInstructionToChange=function(t,n){var e=t[this.propertyName],r=n[this.propertyName];return this.valuesAreEqual(e,r)&&(t.fillAndStrokeStylesTransformed===n.fillAndStrokeStylesTransformed||this.valuesAreEqualWhenTransformed(e,r))?function(){}:this.changeToNewValue(r,n.fillAndStrokeStylesTransformed)},t}(),V=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),q=function(t){function n(n){return t.call(this,n)||this}return V(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValueTransformed=function(t){var n=this;return function(e,r){e[n.propertyName]=t*r.scale}},n.prototype.changeToNewValueUntransformed=function(t){var n=this;return function(e){e[n.propertyName]=t}},n.prototype.valuesAreEqualWhenTransformed=function(t,n){return 0===t&&0===n},n}(N),F=new q("lineWidth"),G=new q("lineDashOffset"),z=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),U=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return z(n,t),n.prototype.valuesAreEqual=function(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0},n.prototype.changeToNewValueTransformed=function(t){return function(n,e){n.setLineDash(t.map((function(t){return t*e.scale})))}},n.prototype.changeToNewValueUntransformed=function(t){return function(n){n.setLineDash(t)}},n.prototype.valuesAreEqualWhenTransformed=function(t,n){return 0===t.length&&0===n.length},n}(N))("lineDash"),Y=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this.viewBox.state.current.lineDashOffset},set:function(t){this.viewBox.changeState((function(n){return G.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.viewBox.state.current.lineWidth},set:function(t){this.viewBox.changeState((function(n){return F.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),t.prototype.getLineDash=function(){return this.viewBox.state.current.lineDash},t.prototype.setLineDash=function(t){this.viewBox.changeState((function(n){return U.changeInstanceValue(n,t)}))},t}(),X=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),H=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return X(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n){n.direction=t}},n}(a))("direction"),Z=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),J=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Z(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n){n.font=t}},n}(a))("font"),Q=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),K=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Q(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n){n.textAlign=t}},n}(a))("textAlign"),$=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tt=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return $(n,t),n.prototype.valuesAreEqual=function(t,n){return t===n},n.prototype.changeToNewValue=function(t){return function(n){n.textBaseline=t}},n}(a))("textBaseline"),nt=function(){function t(t){this.viewBox=t}return Object.defineProperty(t.prototype,"direction",{set:function(t){this.viewBox.changeState((function(n){return H.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.viewBox.changeState((function(n){return J.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.viewBox.changeState((function(n){return K.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.viewBox.changeState((function(n){return tt.changeInstanceValue(n,t)}))},enumerable:!0,configurable:!0}),t}(),et=function(){function t(t){this.viewBox=t}return t.prototype.arc=function(t,n,e,r,o,i){this.viewBox.addPathInstruction(j.arc(t,n,e,r,o,i))},t.prototype.arcTo=function(t,n,e,r,o){this.viewBox.addPathInstruction(j.arcTo(t,n,e,r,o))},t.prototype.bezierCurveTo=function(t,n,e,r,o,i){},t.prototype.closePath=function(){this.viewBox.addPathInstruction(j.closePath())},t.prototype.ellipse=function(t,n,e,r,o,i,a,s){this.viewBox.addPathInstruction(j.ellipse(t,n,e,r,o,i,a,s))},t.prototype.lineTo=function(t,n){this.viewBox.addPathInstruction(j.lineTo(t,n))},t.prototype.moveTo=function(t,n){this.viewBox.addPathInstruction(j.moveTo(t,n))},t.prototype.quadraticCurveTo=function(t,n,e,r){},t.prototype.rect=function(t,n,e,r){this.viewBox.addPathInstruction(j.rect(t,n,e,r))},t}(),rt=function(){function t(t,n){this.canvas=t,this.canvasState=new o(n),this.canvasTransform=new u(n),this.canvasCompositing=new h,this.canvasStrokeStyles=new g(n),this.canvasShadowStyles=new I(n),this.canvasFilters=new T,this.canvasRect=new W(n),this.canvasDrawPath=new k(n),this.canvasUserInterface=new L,this.canvasText=new R(n),this.canvasDrawImage=new M(n),this.canvasImageData=new E(n),this.canvasPathDrawingStyles=new Y(n),this.canvasTextDrawingStyles=new nt(n),this.canvasPath=new et(n)}return t.prototype.save=function(){this.canvasState.save()},t.prototype.restore=function(){this.canvasState.restore()},t.prototype.getTransform=function(){return this.canvasTransform.getTransform()},t.prototype.resetTransform=function(){this.canvasTransform.resetTransform()},t.prototype.rotate=function(t){this.canvasTransform.rotate(t)},t.prototype.scale=function(t,n){this.canvasTransform.scale(t,n)},t.prototype.setTransform=function(t,n,e,r,o,i){this.canvasTransform.setTransform(t,n,e,r,o,i)},t.prototype.transform=function(t,n,e,r,o,i){this.canvasTransform.transform(t,n,e,r,o,i)},t.prototype.translate=function(t,n){this.canvasTransform.translate(t,n)},Object.defineProperty(t.prototype,"globalAlpha",{set:function(t){this.canvasCompositing.globalAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalCompositeOperation",{set:function(t){this.canvasCompositing.globalCompositeOperation=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingEnabled",{set:function(t){this.canvasImageSmoothing.imageSmoothingEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageSmoothingQuality",{set:function(t){this.canvasImageSmoothing.imageSmoothingQuality=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillStyle",{set:function(t){this.canvasStrokeStyles.fillStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeStyle",{set:function(t){this.canvasStrokeStyles.strokeStyle=t},enumerable:!0,configurable:!0}),t.prototype.createLinearGradient=function(t,n,e,r){return this.canvasStrokeStyles.createLinearGradient(t,n,e,r)},t.prototype.createPattern=function(t,n){return this.canvasStrokeStyles.createPattern(t,n)},t.prototype.createRadialGradient=function(t,n,e,r,o,i){return this.canvasStrokeStyles.createRadialGradient(t,n,e,r,o,i)},Object.defineProperty(t.prototype,"shadowBlur",{set:function(t){this.canvasShadowStyles.shadowBlur=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{set:function(t){this.canvasShadowStyles.shadowColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetX",{set:function(t){this.canvasShadowStyles.shadowOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{set:function(t){this.canvasShadowStyles.shadowOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filter",{set:function(t){this.canvasFilters.filter=t},enumerable:!0,configurable:!0}),t.prototype.clearRect=function(t,n,e,r){this.canvasRect.clearRect(t,n,e,r)},t.prototype.fillRect=function(t,n,e,r){this.canvasRect.fillRect(t,n,e,r)},t.prototype.strokeRect=function(t,n,e,r){this.canvasRect.strokeRect(t,n,e,r)},t.prototype.beginPath=function(){this.canvasDrawPath.beginPath()},t.prototype.clip=function(t,n){this.canvasDrawPath.clip(t,n)},t.prototype.fill=function(t,n){this.canvasDrawPath.fill(t,n)},t.prototype.isPointInPath=function(t,n,e,r){return this.canvasDrawPath.isPointInPath(t,n,e,r)},t.prototype.isPointInStroke=function(t,n,e){return this.canvasDrawPath.isPointInStroke(t,n,e)},t.prototype.stroke=function(t){this.canvasDrawPath.stroke(t)},t.prototype.drawFocusIfNeeded=function(t,n){this.canvasUserInterface.drawFocusIfNeeded(t,n)},t.prototype.scrollPathIntoView=function(t){this.canvasUserInterface.scrollPathIntoView(t)},t.prototype.fillText=function(t,n,e,r){this.canvasText.fillText(t,n,e,r)},t.prototype.measureText=function(t){return this.canvasText.measureText(t)},t.prototype.strokeText=function(t,n,e,r){this.canvasText.strokeText(t,n,e,r)},t.prototype.drawImage=function(){this.canvasDrawImage.drawImage.apply(this.canvasDrawImage,arguments)},t.prototype.createImageData=function(t,n){return this.canvasImageData.createImageData(t,n)},t.prototype.getImageData=function(t,n,e,r){return this.canvasImageData.getImageData(t,n,e,r)},t.prototype.putImageData=function(t,n,e,r,o,i,a){this.canvasImageData.putImageData(t,n,e,r,o,i,a)},Object.defineProperty(t.prototype,"lineCap",{set:function(t){this.canvasPathDrawingStyles.lineCap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{set:function(t){this.canvasPathDrawingStyles.lineDashOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{set:function(t){this.canvasPathDrawingStyles.lineJoin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{set:function(t){this.canvasPathDrawingStyles.lineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{set:function(t){this.canvasPathDrawingStyles.miterLimit=t},enumerable:!0,configurable:!0}),t.prototype.getLineDash=function(){return this.canvasPathDrawingStyles.getLineDash()},t.prototype.setLineDash=function(t){this.canvasPathDrawingStyles.setLineDash(t)},Object.defineProperty(t.prototype,"direction",{set:function(t){this.canvasTextDrawingStyles.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{set:function(t){this.canvasTextDrawingStyles.font=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{set:function(t){this.canvasTextDrawingStyles.textAlign=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{set:function(t){this.canvasTextDrawingStyles.textBaseline=t},enumerable:!0,configurable:!0}),t.prototype.arc=function(t,n,e,r,o,i){this.canvasPath.arc(t,n,e,r,o,i)},t.prototype.arcTo=function(t,n,e,r,o){this.canvasPath.arcTo(t,n,e,r,o)},t.prototype.bezierCurveTo=function(t,n,e,r,o,i){this.canvasPath.bezierCurveTo(t,n,e,r,o,i)},t.prototype.closePath=function(){this.canvasPath.closePath()},t.prototype.ellipse=function(t,n,e,r,o,i,a,s){this.canvasPath.ellipse(t,n,e,r,o,i,a)},t.prototype.lineTo=function(t,n){this.canvasPath.lineTo(t,n)},t.prototype.moveTo=function(t,n){this.canvasPath.moveTo(t,n)},t.prototype.quadraticCurveTo=function(t,n,e,r){this.canvasPath.quadraticCurveTo(t,n,e,r)},t.prototype.rect=function(t,n,e,r){this.canvasPath.rect(t,n,e,r)},t}(),ot=function(){function t(t,n,e,r){this.initialState=t,this.state=n,this.instruction=e,this.combinedInstruction=r}return t.prototype.setInitialState=function(t){this.initialState=t;var n=this.initialState.getInstructionToConvertToState(this.state);this.combinedInstruction=B(n,this.instruction)},t.prototype.addClippedPath=function(t){this.state=this.state.withClippedPath(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initialState=t;var n=this.initialState.getInstructionToConvertToStateWithClippedPath(this.state);this.combinedInstruction=B(n,this.instruction)},t.prototype.getAllInstructionsAndStates=function(){return[{instruction:this.instruction,state:this.state}]},t.prototype.copy=function(){return new t(this.initialState,this.state,this.instruction,this.combinedInstruction)},t.prototype.execute=function(t,n){this.combinedInstruction(t,n)},t.create=function(n,e){return new t(n,n,e,e)},t}(),it=function(){function t(t){this.initiallyWithState=t,this.added=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.added.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentlyWithState",{get:function(){return this.addedLast?this.addedLast:this.initiallyWithState},enumerable:!0,configurable:!0}),t.prototype.reconstructState=function(t,n){n.setInitialState(t)},Object.defineProperty(t.prototype,"state",{get:function(){return this.currentlyWithState.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.initiallyWithState.initialState},enumerable:!0,configurable:!0}),t.prototype.getAllInstructionsAndStates=function(){for(var t=this.initiallyWithState.getAllInstructionsAndStates(),n=0,e=this.added;n<e.length;n++){var r=e[n];t=t.concat(r.getAllInstructionsAndStates())}return t},t.prototype.addClippedPath=function(t){this.currentlyWithState.addClippedPath(t)},t.prototype.add=function(t){this.added.push(t),this.addedLast=t},t.prototype.removeAll=function(t){for(var n;(n=this.added.findIndex(t))>-1;)this.removeAtIndex(n)},t.prototype.contains=function(t){return!!this.added.find(t)},t.prototype.setInitialState=function(t){this.initiallyWithState.setInitialState(t)},t.prototype.setInitialStateWithClippedPaths=function(t){this.initiallyWithState.setInitialStateWithClippedPaths(t)},t.prototype.execute=function(t,n){this.initiallyWithState.execute(t,n);for(var e=0,r=this.added;e<r.length;e++){r[e].execute(t,n)}},t.prototype.beforeIndex=function(t){return 0===t?this.initiallyWithState.state:this.added[t-1].state},t.prototype.removeAtIndex=function(t){t===this.added.length-1?1===this.added.length?this.addedLast=void 0:this.addedLast=this.added[t-1]:this.reconstructState(this.beforeIndex(t),this.added[t+1]),this.added.splice(t,1)},t}(),at=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(t){function n(n){return t.call(this,n)||this}return at(n,t),n.create=function(t,e){return new n(ot.create(t,e))},n}(it),ct=function(){function t(t,n,e){this.area=t,this.latestClippedPath=n,this.previouslyClippedPaths=e}return t.prototype.withClippedPath=function(n){return new t(n.getClippedArea(this.area),n,this)},t.prototype.getAllInstructionsAndStates=function(){for(var t=this.latestClippedPath.getAllInstructionsAndStates(),n=this.previouslyClippedPaths?this.previouslyClippedPaths.getAllInstructionsAndStates():[],e=[],r=function(t){e.find((function(n){return n.instruction===t.instruction}))||e.push(t)},o=0,i=n.concat(t);o<i.length;o++){r(i[o])}return e},t.prototype.contains=function(t){return!!t&&(this===t||!!this.previouslyClippedPaths&&this.previouslyClippedPaths.contains(t))},t.prototype.createFromInstructionsAndStates=function(t){for(var n,e=0,r=t;e<r.length;e++){var o=r[e];if(n){var i=ot.create(o.state,o.instruction);i.setInitialState(n.state),n.add(i)}else n=st.create(o.state,o.instruction)}return n},t.prototype.recreate=function(){return this.createFromInstructionsAndStates(this.getAllInstructionsAndStates())},t.prototype.recreateStartingFrom=function(t){var n=t.getAllInstructionsAndStates(),e=this.getAllInstructionsAndStates().filter((function(t){return!n.find((function(n){return n.instruction===t.instruction}))}));return this.createFromInstructionsAndStates(e)},t}(),ut=[H,d,G,U,F,v,K,tt,c,J,P,S,m],ht=function(){function t(t){this.fillStyle=t.fillStyle,this.lineWidth=t.lineWidth,this.lineDash=t.lineDash,this.strokeStyle=t.strokeStyle,this.lineDashOffset=t.lineDashOffset,this.transformation=t.transformation,this.direction=t.direction,this.font=t.font,this.textAlign=t.textAlign,this.textBaseline=t.textBaseline,this.clippedPaths=t.clippedPaths,this.fillAndStrokeStylesTransformed=t.fillAndStrokeStylesTransformed,this.shadowOffset=t.shadowOffset,this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur}return t.prototype.changeProperty=function(n,e){var r=this,o={fillStyle:r.fillStyle,lineWidth:r.lineWidth,lineDash:r.lineDash,strokeStyle:r.strokeStyle,lineDashOffset:r.lineDashOffset,transformation:r.transformation,direction:r.direction,font:r.font,textAlign:r.textAlign,textBaseline:r.textBaseline,clippedPaths:r.clippedPaths,fillAndStrokeStylesTransformed:r.fillAndStrokeStylesTransformed,shadowOffset:r.shadowOffset,shadowColor:r.shadowColor,shadowBlur:r.shadowBlur};return o[n]=e,new t(o)},Object.defineProperty(t.prototype,"clippingRegion",{get:function(){return this.clippedPaths?this.clippedPaths.area:void 0},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){for(var n=0,e=ut;n<e.length;n++){if(!e[n].isEqualForInstances(this,t))return!1}return(!this.clippedPaths&&!t.clippedPaths||this.clippedPaths&&this.clippedPaths===t.clippedPaths)&&this.fillAndStrokeStylesTransformed===t.fillAndStrokeStylesTransformed},t.prototype.isTransformable=function(){for(var t=0,n=ut;t<n.length;t++){if(!n[t].valueIsTransformableForInstance(this))return!1}return!0},t.prototype.getInstructionToConvertToState=function(t){var n=this,e=ut.map((function(e){return e.getInstructionToChange(n,t)}));return function(t,n){for(var r=0;r<e.length;r++)e[r](t,n)}},t.prototype.withClippedPath=function(t){var n=this.clippedPaths?this.clippedPaths.withClippedPath(t):new ct(t.getClippedArea(),t);return this.changeProperty("clippedPaths",n)},t.default=new t({fillStyle:"#000",lineWidth:1,lineDash:[],strokeStyle:"#000",lineDashOffset:0,transformation:i.identity,direction:"inherit",font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic",clippedPaths:void 0,fillAndStrokeStylesTransformed:!1,shadowOffset:{x:0,y:0},shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:0}),t.setDefault=function(){},t}(),pt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.colorStops=[],n}return pt(n,t),n.prototype.addColorStopsToGradient=function(t){for(var n=0,e=this.colorStops;n<e.length;n++){var r=e[n];t.addColorStop(r.offset,r.color)}},n.prototype.addColorStop=function(t,n){this.colorStops.push({offset:t,color:n})},n.prototype.getInstructionToSetTransformed=function(t){var n=this;return function(e,r){e[t]=n.createTransformedGradient(r)}},n.prototype.getInstructionToSetUntransformed=function(t){var n=this;return function(e){e[t]=n.createGradient()}},n}(p),lt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yt=function(t){function n(n,e,r,o,i){var a=t.call(this)||this;return a.context=n,a.x0=e,a.y0=r,a.x1=o,a.y1=i,a}return lt(n,t),n.prototype.createTransformedGradient=function(t){var n=t.apply({x:this.x0,y:this.y0}),e=n.x,r=n.y,o=t.apply({x:this.x1,y:this.y1}),i=o.x,a=o.y,s=this.context.createLinearGradient(e,r,i,a);return this.addColorStopsToGradient(s),s},n.prototype.createGradient=function(){var t=this.context.createLinearGradient(this.x0,this.y0,this.x1,this.y1);return this.addColorStopsToGradient(t),t},n}(ft),dt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vt=function(t){function n(n,e,r,o,i,a,s){var c=t.call(this)||this;return c.context=n,c.x0=e,c.y0=r,c.r0=o,c.x1=i,c.y1=a,c.r1=s,c}return dt(n,t),n.prototype.createTransformedGradient=function(t){var n=t.apply({x:this.x0,y:this.y0}),e=n.x,r=n.y,o=t.apply({x:this.x1,y:this.y1}),i=o.x,a=o.y,s=this.r0*t.scale,c=this.r1*t.scale,u=this.context.createRadialGradient(e,r,s,i,a,c);return this.addColorStopsToGradient(u),u},n.prototype.createGradient=function(){var t=this.context.createRadialGradient(this.x0,this.y0,this.r0,this.x1,this.y1,this.r1);return this.addColorStopsToGradient(t),t},n}(ft),gt=function(){function t(t){this.currentState=t,this.instructions=[]}return t.prototype.restore=function(){this.addChangeToState(this.currentState.restored(),(function(t){t.restore()}))},t.prototype.save=function(){this.addChangeToState(this.currentState.saved(),(function(t){t.save()}))},t.prototype.changeCurrentInstanceTo=function(t){if(!this.currentState.current.equals(t)){var n=this.currentState.current.getInstructionToConvertToState(t),e=this.currentState.withCurrentState(t);this.addChangeToState(e,n)}},t.prototype.addChangeToState=function(t,n){this.currentState=t,n&&this.instructions.push(n)},Object.defineProperty(t.prototype,"instruction",{get:function(){var t=this;if(0!==this.instructions.length)return function(n,e){for(var r=0,o=t.instructions;r<o.length;r++){(0,o[r])(n,e)}}},enumerable:!0,configurable:!0}),t}(),wt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return wt(n,t),n.prototype.changeCurrentInstanceTo=function(e){if(!this.currentState.current.equals(e)){if(!n.canConvert(this.currentState.current,e)){if(!(this.currentState.stack.length>0))return void t.prototype.changeCurrentInstanceTo.call(this,e);this.restore(),this.save()}if(e.clippedPaths){var r=this.currentState,o=r.current.clippedPaths;if(e.clippedPaths===o)t.prototype.changeCurrentInstanceTo.call(this,e);else{var i=o?e.clippedPaths.recreateStartingFrom(o):e.clippedPaths.recreate();this.convertToState(i.initialState),this.addChangeToState(i.state,(function(t,n){i.execute(t,n)})),this.convertToState(r.replaceCurrent(e))}}else t.prototype.changeCurrentInstanceTo.call(this,e)}},n.prototype.convertToState=function(t){var n=this.currentState.getInstructionToConvertToState(t);this.addChangeToState(t,n)},n.canConvert=function(t,n){return!t.clippedPaths||!!n.clippedPaths&&n.clippedPaths.contains(t.clippedPaths)},n}(gt),bt=new(function(){function t(t,n){void 0===n&&(n=[]),this.current=t,this.stack=n}return t.prototype.replaceCurrent=function(n){return new t(n,this.stack)},t.prototype.withCurrentState=function(n){return new t(n,this.stack)},t.prototype.currentlyTransformed=function(t){return this.withCurrentState(this.current.changeProperty("fillAndStrokeStylesTransformed",t))},t.prototype.withClippedPath=function(n){return new t(this.current.withClippedPath(n),this.stack)},t.prototype.saved=function(){return new t(this.current,(this.stack||[]).concat([this.current]))},t.prototype.restored=function(){return this.stack&&0!==this.stack.length?new t(this.stack[this.stack.length-1],this.stack.slice(0,this.stack.length-1)):this},t.prototype.convertToLastSavedInstance=function(t,n){for(var e=this.stack.length-1;e>n;e--)t.restore()},t.prototype.convertFromLastSavedInstance=function(t,n){for(var e=n+1;e<this.stack.length;e++)t.changeCurrentInstanceTo(this.stack[e]),t.save();t.changeCurrentInstanceTo(this.current)},t.prototype.getInstructionToConvertToStateUsingConversion=function(n,e){var r=t.findIndexOfHighestCommon(this.stack,e.stack);return this.convertToLastSavedInstance(n,r),e.convertFromLastSavedInstance(n,r),n.instruction},t.prototype.getInstructionToConvertToState=function(t){return this.getInstructionToConvertToStateUsingConversion(new gt(this),t)},t.prototype.getInstructionToClearStack=function(){var t=this.stack.length;return function(n){for(var e=0;e<t;e++)n.restore()}},t.prototype.getInstructionToConvertToStateWithClippedPath=function(t){return this.getInstructionToConvertToStateUsingConversion(new mt(this),t)},t.findIndexOfHighestCommon=function(t,n){for(var e=0,r=Math.min(t.length-1,n.length-1);e<=r;){if(!t[e].equals(n[e]))return e-1;e++}return e-1},t}())(ht.default,[]),Pt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xt=function(t){function n(n,e,r,o,i){var a=t.call(this,n,e,r,o)||this;return a.area=i,a}return Pt(n,t),n.prototype.hasDrawingAcrossBorderOf=function(t){return!1},n.prototype.intersects=function(t){return this.area.intersects(t)},n.prototype.isContainedBy=function(t){return t.contains(this.area)},n.createClearRect=function(t,e){var r=e.getInstructionToClear().instruction;return new n(t,t,r,r,e)},n}(ot),St=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),It=function(t){function n(n){return t.call(this,n)||this}return St(n,t),n.prototype.reconstructState=function(t,n){n.setInitialStateWithClippedPaths(t)},n.prototype.hasDrawingAcrossBorderOf=function(t){return this.contains((function(n){return n.hasDrawingAcrossBorderOf(t)}))},n.prototype.intersects=function(t){return this.contains((function(n){return n.intersects(t)}))},n.prototype.addClearRect=function(t,n){var e=xt.createClearRect(n,t);e.setInitialState(this.state),this.add(e)},n.prototype.clearContentsInsideArea=function(t){this.removeAll((function(n){return n.isContainedBy(t)}))},n.prototype.isContainedBy=function(t){return!this.contains((function(n){return!n.isContainedBy(t)}))},n.create=function(){return new n(ot.create(bt,ht.setDefault))},n}(it),Tt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Tt(n,t),n.prototype.copy=function(){return new n(this.initialState,this.state,this.instruction,this.combinedInstruction)},n.create=function(t,e){return new n(t,t,e,e)},n}(ot),Ot=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),At=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ot(n,t),n.prototype.copy=function(){return new n(this.initialState,this.state,this.instruction,this.combinedInstruction)},n.create=function(t,e){return new n(t,t,e,e)},n}(_t),Ct=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bt=function(t){function n(n,e,r,o,i){var a=t.call(this,n,e,r,o)||this;return a.drawnArea=i,a}return Ct(n,t),n.prototype.copy=function(){return new n(this.initialState,this.state,this.instruction,this.combinedInstruction,this.drawnArea)},n.createDrawing=function(t,e,r){return new n(t,t,e,e,r)},n}(_t),Dt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jt=function(t){function n(n){var e=t.call(this,n)||this;return e._initiallyWithState=n,e}return Dt(n,t),n.prototype.getCurrentlyDrawableArea=function(){if(this.area)return this.state.current.clippingRegion?this.state.current.clippingRegion.intersectWith(this.area):this.area},n.prototype.copy=function(){for(var t=new n(this._initiallyWithState.copy()),e=0,r=this.added;e<r.length;e++){var o=r[e];t.add(o.copy())}return t},n.prototype.drawPath=function(t,n){var e=this.getCurrentlyDrawableArea();this.drawnArea=this.drawnArea?this.drawnArea.expandToInclude(e):e;var r=Bt.createDrawing(n,t,this.drawnArea);r.setInitialState(this.state),this.add(r),this.visible=!0},n.prototype.clipPath=function(t,n){var e=At.create(n,t);e.setInitialState(this.state),this.add(e);var r=this.recreateClippedPath();this.addClippedPath(r)},n.prototype.addPathInstruction=function(t,n){this.area=t.changeArea.execute(n.current.transformation,this.area);var e=_t.create(n,t.instruction);e.setInitialState(this.state),this.add(e)},n.prototype.execute=function(n,e){this.visible&&t.prototype.execute.call(this,n,e)},n.prototype.hasDrawingAcrossBorderOf=function(t){return!(!this.drawnArea||!this.visible)&&(!t.contains(this.drawnArea)&&t.intersects(this.drawnArea))},n.prototype.isContainedBy=function(t){var n=this.drawnArea||this.area;return t.contains(n)},n.prototype.intersects=function(t){return!(!this.area||!this.visible)&&this.area.intersects(t)},n.prototype.getClippedArea=function(t){return t?this.area.intersectWith(t):this.area},n.prototype.clearContentsInsideArea=function(t){this.drawnArea&&this.visible&&(this.removeAll((function(n){return n instanceof Bt&&t.contains(n.drawnArea)})),t.contains(this.drawnArea)&&(this.visible=!1))},n.prototype.addClearRect=function(t,n){this.addPathInstruction(t.getInstructionToClear(),n)},n.prototype.recreatePath=function(){var t=this.copy();return t.removeAll((function(t){return t instanceof Bt})),t.area=this.area,t},n.prototype.recreateClippedPath=function(){var t=this.copy();return t.removeAll((function(t){return t instanceof Bt})),t.area=this.area,t},n.create=function(t,e){var r=new n(ot.create(t,(function(t){t.beginPath()})));if(!e)return r;for(var o=0,i=e;o<i.length;o++){var a=i[o];r.addPathInstruction(a,t)}return r},n}(it),Wt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kt=function(t){function n(n,e,r,o,i){var a=t.call(this,n,e,r,o)||this;return a.area=i,a}return Wt(n,t),n.prototype.hasDrawingAcrossBorderOf=function(t){return this.intersects(t)&&!this.isContainedBy(t)},n.prototype.intersects=function(t){return this.area.intersects(t)},n.prototype.isContainedBy=function(t){return t.contains(this.area)},n.createDrawing=function(t,e,r){return new n(t,t,e,e,r)},n}(ot),Lt=function(){function t(t){this.onChange=t,this.previousInstructionsWithPath=It.create(),this.state=this.previousInstructionsWithPath.state}return t.prototype.beginPath=function(){this.replaceCurrentInstructionsWithPath(jt.create(this.state))},t.prototype.changeState=function(t){this.state=this.state.withCurrentState(t(this.state.current))},t.prototype.saveState=function(){this.state=this.state.saved(),this.setInstructionToRestoreState()},t.prototype.restoreState=function(){this.state=this.state.restored(),this.setInstructionToRestoreState()},t.prototype.drawPath=function(t,n){this.state.current.isTransformable()||(t=C(t)),n?this.drawPathInstructions(n,t):this.drawCurrentPath(t),this.onChange()},t.prototype.addDrawing=function(t,n,e,r){e===D.Relative?(t=C(t),n=n.transform(this.state.current.transformation)):e===D.Absolute&&(t=function(t){return function(n,e){var r=e.a,o=e.b,i=e.c,a=e.d,s=e.e,c=e.f;n.save(),n.setTransform(r,o,i,a,s,c),t(n,e),n.restore()}}(t)),this.state.current.clippingRegion&&r&&(n=n.intersectWith(this.state.current.clippingRegion));var o=kt.createDrawing(this.state.currentlyTransformed(!1),t,n);this.drawBeforeCurrentPath(o),this.onChange()},t.prototype.clipPath=function(t){this.clipCurrentPath(t)},t.prototype.replaceCurrentInstructionsWithPath=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];this.currentInstructionsWithPath&&this.currentInstructionsWithPath.visible&&this.previousInstructionsWithPath.add(this.currentInstructionsWithPath);for(var r=0,o=n;r<o.length;r++){var i=o[r];i.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.previousInstructionsWithPath.add(i)}t.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state),this.currentInstructionsWithPath=t,this.setInstructionToRestoreState()},t.prototype.drawCurrentPath=function(t){this.currentInstructionsWithPath&&(this.state=this.state.currentlyTransformed(this.state.current.isTransformable()),this.currentInstructionsWithPath.drawPath(t,this.state),this.setInstructionToRestoreState())},t.prototype.clipCurrentPath=function(t){this.currentInstructionsWithPath&&(this.currentInstructionsWithPath.clipPath(t,this.state),this.state=this.currentInstructionsWithPath.state)},t.prototype.setInstructionToRestoreState=function(){var t=this.currentInstructionsWithPath&&this.currentInstructionsWithPath.visible?this.currentInstructionsWithPath.state:this.previousInstructionsWithPath.state;this.instructionToRestoreState=t.getInstructionToClearStack()},t.prototype.drawPathInstructions=function(t,n){var e=this.state.currentlyTransformed(this.state.current.isTransformable()),r=jt.create(e,t);r.drawPath(n,e),this.drawBeforeCurrentPath(r)},t.prototype.drawBeforeCurrentPath=function(t){if(this.currentInstructionsWithPath){var n=this.currentInstructionsWithPath.recreatePath();n.setInitialState(this.currentInstructionsWithPath.state),this.replaceCurrentInstructionsWithPath(n,t)}else t.setInitialState(this.previousInstructionsWithPath.state),this.previousInstructionsWithPath.add(t),this.state=this.previousInstructionsWithPath.state},t.prototype.addPathInstruction=function(t){this.currentInstructionsWithPath&&this.currentInstructionsWithPath.addPathInstruction(t,this.state)},t.prototype.intersects=function(t){return this.previousInstructionsWithPath.intersects(t)||this.currentInstructionsWithPath&&this.currentInstructionsWithPath.intersects(t)},t.prototype.hasDrawingAcrossBorderOf=function(t){return this.previousInstructionsWithPath.hasDrawingAcrossBorderOf(t)||this.currentInstructionsWithPath&&this.currentInstructionsWithPath.hasDrawingAcrossBorderOf(t)},t.prototype.clearContentsInsideArea=function(t){this.currentInstructionsWithPath?(this.previousInstructionsWithPath.clearContentsInsideArea(t),this.currentInstructionsWithPath.clearContentsInsideArea(t),this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.previousInstructionsWithPath.state)):this.previousInstructionsWithPath.clearContentsInsideArea(t)},t.prototype.clearArea=function(t,n,e,r){var o=new O(t,n,e,r),i=o.transform(this.state.current.transformation);this.intersects(i)&&(this.clearContentsInsideArea(i),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.hasDrawingAcrossBorderOf(i)?this.currentInstructionsWithPath.addClearRect(o,this.state):this.previousInstructionsWithPath.hasDrawingAcrossBorderOf(i)&&(this.previousInstructionsWithPath.addClearRect(o,this.state),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.setInitialStateWithClippedPaths(this.state)),this.onChange())},t.prototype.execute=function(t,n){(this.previousInstructionsWithPath.length||this.currentInstructionsWithPath&&this.currentInstructionsWithPath.visible)&&this.previousInstructionsWithPath.execute(t,n),this.currentInstructionsWithPath&&this.currentInstructionsWithPath.execute(t,n),this.instructionToRestoreState&&this.instructionToRestoreState(t,n)},t}(),Rt=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}))},Mt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Et=function(){function t(t,n,e,r,o){var a=this;this.width=t,this.height=n,this.context=e,this.drawingIterationProvider=r,this.drawLockProvider=o,this.instructionSet=new Lt((function(){return r.provideDrawingIteration((function(){return a.draw()}))})),this._transformation=i.identity}return Object.defineProperty(t.prototype,"state",{get:function(){return this.instructionSet.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformation",{get:function(){return this._transformation},set:function(t){var n=this;this._transformation=t,this.drawingIterationProvider.provideDrawingIteration((function(){return n.draw()}))},enumerable:!0,configurable:!0}),t.prototype.getDrawingLock=function(){return this.drawLockProvider()},t.prototype.changeState=function(t){this.instructionSet.changeState(t)},t.prototype.measureText=function(t){this.context.save(),ht.default.getInstructionToConvertToState(this.state.currentlyTransformed(!1).current)(this.context,i.identity);var n=this.context.measureText(t);return this.context.restore(),n},t.prototype.saveState=function(){this.instructionSet.saveState()},t.prototype.restoreState=function(){this.instructionSet.restoreState()},t.prototype.beginPath=function(){this.instructionSet.beginPath()},t.prototype.createPatternFromImageData=function(t){return Rt(this,void 0,void 0,(function(){var n;return Mt(this,(function(e){switch(e.label){case 0:return[4,createImageBitmap(t)];case 1:return n=e.sent(),[2,this.context.createPattern(n,"no-repeat")]}}))}))},t.prototype.addDrawing=function(t,n,e,r){this.instructionSet.addDrawing(t,n,e,r)},t.prototype.addPathInstruction=function(t){this.instructionSet.addPathInstruction(t)},t.prototype.drawPath=function(t,n){this.instructionSet.drawPath(t,n)},t.prototype.clipPath=function(t){this.instructionSet.clipPath(t)},t.prototype.clearArea=function(t,n,e,r){this.instructionSet.clearArea(t,n,e,r)},t.prototype.createLinearGradient=function(t,n,e,r){return new yt(this.context,t,n,e,r)},t.prototype.createRadialGradient=function(t,n,e,r,o,i){return new vt(this.context,t,n,e,r,o,i)},t.prototype.createPattern=function(t,n){return new l(this.context.createPattern(t,n))},t.prototype.draw=function(){this.context.restore(),this.context.save(),this.context.clearRect(0,0,this.width,this.height),this.instructionSet.execute(this.context,this._transformation)},t}(),Nt=function(t,n){this.initial=t,this.cancel=n,this.current=t},Vt=function(){function t(t){this.point=t,this.handlers=[]}return t.prototype.removeHandler=function(t){var n=this.handlers.indexOf(t);return n>-1&&this.handlers.splice(n,1),this},t.prototype.moveTo=function(t,n){var e={x:t,y:n};this.point=e;for(var r=0,o=this.handlers;r<o.length;r++){(0,o[r])(e)}},t.prototype.onMoved=function(t){var n,e=this,r=function(e){n.current=e,t()};return this.handlers.push(r),n=new Nt(this.point,(function(){return e.removeHandler(r)}))},t}(),qt=function(){function t(t,n){var e=this;this.context=n,this.initialTransformation=n.transformation,this.point=t.onMoved((function(){e.setTransformation()}))}return t.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(this.getTranslation())},t.prototype.getTranslation=function(){return i.translation(this.point.current.x-this.point.initial.x,this.point.current.y-this.point.initial.y)},t.prototype.withMovable=function(t){return this.context.getGestureForTwoMovables(this.point.cancel(),t)},t.prototype.withoutMovable=function(t){},t}(),Ft=function(){function t(t,n,e){var r=this;this.context=e,this.initialTransformation=e.transformation,this.point1=t.onMoved((function(){return r.setTransformation()})),this.point2=n.onMoved((function(){return r.setTransformation()}))}return t.prototype.withMovable=function(t){},t.prototype.withoutMovable=function(t){var n=this.point1.cancel(),e=this.point2.cancel();return t===n?this.context.getGestureForOneMovable(e):t===e?this.context.getGestureForOneMovable(n):void 0},t}(),Gt=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(t){function n(n,e,r){return t.call(this,n,e,r)||this}return Gt(n,t),n.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(i.translateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},n}(Ft),Ut=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yt=function(t){function n(n,e,r){return t.call(this,n,e,r)||this}return Ut(n,t),n.prototype.setTransformation=function(){this.context.transformation=this.initialTransformation.before(i.translateRotateZoom(this.point1.initial.x,this.point1.initial.y,this.point2.initial.x,this.point2.initial.y,this.point1.current.x,this.point1.current.y,this.point2.current.x,this.point2.current.y))},n}(Ft),Xt=function(){function t(t,n){this.transformable=t,this.config=n}return Object.defineProperty(t.prototype,"transformation",{get:function(){return this.transformable.transformation},set:function(t){this.transformable.transformation=t},enumerable:!0,configurable:!0}),t.prototype.getGestureForOneMovable=function(t){return new qt(t,this)},t.prototype.getGestureForTwoMovables=function(t,n){return this.config.rotationEnabled?new Yt(t,n,this):new zt(t,n,this)},t}(),Ht=function(){function t(t,n){var e=this;this.viewBox=n,this.initialTransformation=n.transformation,this.angularVelocity=4*Math.PI/n.width,this.point=t.onMoved((function(){e.setTransformation()}))}return t.prototype.setTransformation=function(){this.viewBox.transformation=this.initialTransformation.before(i.rotation(this.point.initial.x,this.point.initial.y,(this.point.initial.x-this.point.current.x)*this.angularVelocity))},t.prototype.end=function(){this.point.cancel()},t}(),Zt=function(){function t(t,n,e,r,o){this.transformable=t,this.centerX=n,this.centerY=e,this.onFinish=o,this.maxScaleLogStep=.1,this.initialTransformation=t.transformation,this.currentScaleLog=0,this.targetScaleLog=Math.log(r),this.makeStep()}return t.prototype.makeStep=function(){var t=this,n=this.targetScaleLog-this.currentScaleLog;Math.abs(n)<=this.maxScaleLogStep?(this.currentScaleLog+=n,this.setTransformToCurrentScaleLog(),this.onFinish()):(this.currentScaleLog+=n<0?-this.maxScaleLogStep:this.maxScaleLogStep,this.setTransformToCurrentScaleLog(),this.stepTimeout=setTimeout((function(){return t.makeStep()}),20))},t.prototype.setTransformToCurrentScaleLog=function(){this.transformable.transformation=this.initialTransformation.before(i.zoom(this.centerX,this.centerY,Math.exp(this.currentScaleLog)))},t.prototype.cancel=function(){void 0!==this.stepTimeout&&clearTimeout(this.stepTimeout)},t}(),Jt=function(){function t(t,n){this.viewBox=t,this.context=new Xt(t,n)}return t.prototype.createAnchor=function(t){var n=this;return{moveTo:function(n,e){t.moveTo(n,e)},release:function(){n.gesture=n.gesture.withoutMovable(t)}}},t.prototype.zoom=function(t,n,e){var r=this;this._zoom&&this._zoom.cancel(),this._zoom=new Zt(this.viewBox,t,n,e,(function(){return r._zoom=void 0}))},t.prototype.getAnchor=function(t,n){var e=new Vt({x:t,y:n});if(!this.gesture)return this.gesture=this.context.getGestureForOneMovable(e),this.createAnchor(e);var r=this.gesture.withMovable(e);return r?(this.gesture=r,this.createAnchor(e)):void 0},t.prototype.getRotationAnchor=function(t,n){var e=new Vt({x:t,y:n}),r=new Ht(e,this.viewBox);return{moveTo:function(t,n){e.moveTo(t,n)},release:function(){r.end()}}},t}();var Qt=function(){function t(){this.latestIdentifier=0,this.records=[]}return t.prototype.addAnchor=function(t,n){var e=++this.latestIdentifier;return this.records.push({identifier:e,anchor:t,externalIdentifier:n}),e},t.prototype.getAnchorByIdentifier=function(t){var n=this.records.find((function(n){return n.identifier===t}));if(n)return n.anchor},t.prototype.getAnchorByExternalIdentifier=function(t){var n=this.records.find((function(n){return n.externalIdentifier===t}));if(n)return n.anchor},t.prototype.removeAnchorByIdentifier=function(t){var n=this.records.findIndex((function(n){return n.identifier===t}));n>-1&&this.records.splice(n,1)},t.prototype.removeAnchorByExternalIdentifier=function(t){var n=this.records.findIndex((function(n){return n.externalIdentifier===t}));n>-1&&this.records.splice(n,1)},t}();var Kt=function(t,n,e,r){function o(n,e){var r=t.getBoundingClientRect();return{x:n-r.left,y:e-r.top}}this.anchorSet=new Qt,function(t,n,e,r,o){t.addEventListener("wheel",(function(t){if(!o.greedyGestureHandling&&!t.ctrlKey)return!0;var e=r(t.clientX,t.clientY),i=e.x,a=e.y,s=t.deltaY,c=Math.pow(2,-s/300);return n.zoom(i,a,c),t.preventDefault(),!1}))}(t,e,this.anchorSet,o,r),function(t,n,e,r,o){var i;function a(){void 0!==i&&(e.getAnchorByIdentifier(i).release(),e.removeAnchorByIdentifier(i),i=void 0)}t.addEventListener("mousedown",(function(t){if(void 0===i){var a,s=r(t.clientX,t.clientY),c=s.x,u=s.y;if(1===t.button){if(!o.rotationEnabled)return!0;a=n.getRotationAnchor(c,u)}else a=n.getAnchor(c,u);return i=e.addAnchor(a),t.preventDefault(),!1}})),t.addEventListener("mousemove",(function(t){if(void 0!==i){var n=r(t.clientX,t.clientY),o=n.x,a=n.y;e.getAnchorByIdentifier(i).moveTo(o,a)}})),t.addEventListener("mouseup",(function(t){a()})),t.addEventListener("mouseleave",(function(t){a()}))}(t,e,this.anchorSet,o,r),function(t,n,e,r,o){t.addEventListener("touchstart",(function(t){var i=t.touches;if(1===i.length&&!o.greedyGestureHandling)return!0;if(!t.cancelable)return console.log("touchstart event was not cancelable"),!0;for(var a=0;a<i.length;a++){var s=i[a],c=s.identifier;if(!e.getAnchorByExternalIdentifier(c)){var u=r(s.clientX,s.clientY),h=u.x,p=u.y,f=n.getAnchor(h,p);e.addAnchor(f,c)}}return t.preventDefault(),!1})),t.addEventListener("touchmove",(function(t){for(var n=t.changedTouches,o=0;o<n.length;o++){var i=n[o],a=e.getAnchorByExternalIdentifier(i.identifier);if(a){var s=r(i.clientX,i.clientY),c=s.x,u=s.y;a.moveTo(c,u)}}})),t.addEventListener("touchend",(function(t){for(var n=t.changedTouches,r=0;r<n.length;r++){var o=n[r],i=e.getAnchorByExternalIdentifier(o.identifier);i&&(i.release(),e.removeAnchorByExternalIdentifier(o.identifier))}}))}(t,e,this.anchorSet,o,r)},$t=function(){function t(){this.animationFrameRequested=!1}return t.prototype.provideDrawingIteration=function(t){var n=this;this.animationFrameRequested||(this.animationFrameRequested=!0,requestAnimationFrame((function(){t(),n.animationFrameRequested=!1})))},t}(),tn=function(){function t(t){this.infiniteCanvas=t,this.listeners=[],this.onceListeners=[]}return t.prototype.dispatchEvent=function(t){var n=this.onceListeners;this.onceListeners=[];for(var e=0,r=n;e<r.length;e++){var o=r[e];this.notifyListener(o,t)}for(var i=0,a=this.listeners;i<a.length;i++){var s=a[i];this.notifyListener(s,t)}},t.prototype.addListener=function(t,n){n&&n.once?this.onceListeners.push(t):this.listeners.push(t)},t.prototype.notifyListener=function(t,n){try{t.call(this.infiniteCanvas,n)}catch(t){console.error(t)}},t}(),nn=function(){function t(t){this.drawingIterationProvider=t,this._drawCallback=function(){}}return t.prototype.provideDrawingIteration=function(t){var n=this;this.drawingIterationProvider.provideDrawingIteration((function(){t(),n._drawCallback&&n._drawCallback()}))},t.prototype.onDraw=function(t){this._drawCallback=t},t}(),en=function(){function t(t){this.drawingIterationProvider=t,this._locks=[]}return t.prototype.removeLock=function(t){var n=this._locks.indexOf(t);this._locks.splice(n,1),0===this._locks.length&&this._draw&&this.drawingIterationProvider.provideDrawingIteration(this._draw)},t.prototype.provideDrawingIteration=function(t){this._locks.length?this._draw=t:this.drawingIterationProvider.provideDrawingIteration(t)},t.prototype.getLock=function(){var t,n=this;return t={release:function(){n.removeLock(t)}},this._locks.push(t),t},t}();e.d(n,"InfiniteCanvas",(function(){return rn}));var rn=function(){function t(t,n){var e=this;this.canvas=t,this.config=n||{rotationEnabled:!0,greedyGestureHandling:!1},this.eventDispatchers={draw:new tn(this)};var r=new nn(new $t);r.onDraw((function(){return e.dispatchDrawEvent()}));var o=new en(r);this.viewBox=new Et(t.width,t.height,t.getContext("2d"),o,(function(){return o.getLock()})),this.transformer=new Jt(this.viewBox,this.config);new Kt(t,this.viewBox,this.transformer,this.config)}return t.prototype.getContext=function(){return this.context||(this.context=new rt(this.canvas,this.viewBox)),this.context},Object.defineProperty(t.prototype,"rotationEnabled",{get:function(){return this.config.rotationEnabled},set:function(t){this.config.rotationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"greedyGestureHandling",{get:function(){return this.config.greedyGestureHandling},set:function(t){this.config.greedyGestureHandling=t},enumerable:!0,configurable:!0}),t.prototype.addEventListener=function(t,n,e){this.eventDispatchers[t].addListener(n,e)},t.prototype.dispatchDrawEvent=function(){this.eventDispatchers.draw.dispatchEvent({})},t}()}]);